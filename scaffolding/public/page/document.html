
<!DOCTYPE html>
<html>
<head>
	
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keyword" content="software,development">
<meta name="description" content="description of site">
<meta name="author" content="zhouzh1">
<link rel="stylesheet" href="/theme_assets/css/normalize.css">
<link rel="stylesheet" href="/theme_assets/css/font-awesome-4.7.0/css/font-awesome.css">
<link rel="stylesheet" href="/theme_assets/css/site.css">
<link rel="stylesheet" href="/theme_assets/css/styles/github.css">
	<title>文档</title>
</head>
<body>
	<div class="body-wrapper">
		<!-- secondary start-->

<div class="secondary">
	<header class="header">
		<h1 class="site-title"><a href="/" class="site-title-link">pencil</a></h1>
		<button type="button" class="toggle toggle-sm toggle-sidebar display-sidebar"><i class="fa fa-arrow-right"></i></button>
		<h2 class="site-description" title="description of site">description of site</h2>
		<button type="button" class="toggle toggle-sm toggle-nav" id="toggle-nav"><i class="fa fa-bars"></i></button>
		<nav class="navbar" id="navbar">
			<table class="nav-table">
				<tbody>
					<tr>
						
						<td><i class="fa fa-home "></i></td>
						<td><a href="/" class="">首页</a></td>
					</tr>
					<tr>
						
						<td><i class="fa fa-archive "></i></td>
						<td><a href="/archive" class="">归档</a></td>
					</tr>
								
					<tr>
						<td><i class="fa fa-file-text visited"></i></td>
						<td><a href="/page/document.html" class="visited">文档</a></td>
					</tr>
									<tr>
						<td><i class="fa fa-rss"></i></td>
						<td><a href="/rss.xml">RSS</a></td>
					</tr>
				</tbody>
			</table>
		</nav>
	</header>
	<section class="sidebar" id="sidebar">
		<button type="button" class="toggle toggle-sm toggle-sidebar hide-sidebar"><i class="fa fa-arrow-left"></i></button>
				<aside class="category">
			<h1>文章分类</h1>
			<ul class="category-list">
							<li><a href="/category/poem">poem (1)</a></li>
						</ul>
		</aside>
		
				<aside class="archive">
			<h1>文章归档</h1>
				
						<a href="/archive/index.html#2017">2017年07月 (1)</a>
							</aside>
		
				<aside class="tag">
			<h1>标签</h1>
			<div class="tag-cloud"><a href="/tag/funny" class="tag-link" style="font-size: 1em">funny</a></div>  
		</aside>
			</section>
</div>
<!-- secondary end -->
		<div class="primary">
			<div class="main-content">
			<section class="article-text">
				<h1 id="pencil">Pencil</h1>
<p>Pencil is a generator of static blog. In fact, it&#39;s a command line program written in Node.js. With the use of pencil, users need to edit markdown and execute corresponding command only, pencil will generate a blog site for you.</p>
<p><img src="/site_assets/screenshot.png" alt="shortcut"></p>
<h1 id="install">Install</h1>
<p><code>npm install pencil-cli --global</code></p>
<h1 id="usage">Usage</h1>
<p>Before using pencil, you must ensure that you have installed Node.js and Git client. Git client will be used to manage versions of your site files and deploy your blog to Github or your own server.</p>
<h2 id="-scaffcolding">- Scaffcolding</h2>
<p>Scaffcolding contains directory tree of blog site, it is shown as following.</p>
<pre><code>.
|____site
  |____config.yml      <span class="comment"># configuration file</span>
  |____<span class="keyword">public</span>          <span class="comment"># root directory of site</span>
    |____site_assets   <span class="comment"># static assets of site</span>
    |____theme_assets  <span class="comment"># static assets of theme in use</span>
  |____source          <span class="comment"># markdown source file</span>
  |____plugins         <span class="comment"># plugins for site</span>
  |____themes          <span class="comment"># themes for blog</span>
</code></pre><h2 id="-commands">- Commands</h2>
<ul>
<li><code>pencil help [command]</code> Show help information</li>
<li><code>pencil init &lt;dir&gt;</code> Initiate a new blog, <code>&lt;dir&gt;</code> could be absolute or relative path, but must be empty. After initiation, you need to change your working directory to <code>&lt;dir&gt;</code></li>
<li><code>pencil create &lt;type&gt; &lt;title&gt;</code> Create a new article or independent page, but just is a draft, <code>&lt;type&gt;</code> could be &#39;article&#39; or &#39;page&#39;, <code>&lt;title&gt;</code> will be article&#39;s or page&#39;s title. After creation, program will generate a markdown file for corresponding type and open you default editor with that markdown file. In addition, program has written frontmatter to draft, you can attach a category and some tags to article, and specify the final html&#39;s filename</li>
<li><code>pencil publish &lt;type&gt; &lt;title&gt;</code> Publish draft, <code>&lt;type&gt;</code> and <code>&lt;title&gt;</code> is the same as in <code>create</code></li>
<li><code>pencil generate</code> Generate a static blog site for you</li>
<li><code>pencil server [port]</code> Start a local server listening on <code>[port]</code> to preview your blog site, default <code>[port]</code> is 3000</li>
<li><code>pencil push</code> Push your blog site to remote server</li>
<li><code>pencil list [type]</code> List drafts, articles and independent pages</li>
<li><code>penicl edit &lt;type&gt; &lt;title&gt;</code> Open default editor to edit markdown</li>
<li><code>pencil delete &lt;type&gt; &lt;title&gt;</code> Delete drafts, articles and independent pages</li>
</ul>
<h2 id="-deploy">- Deploy</h2>
<p>If you use private vps to host site, please install git server firstly, otherwise use <a href="https://pages.github.com/">GithubPages</a>.</p>
<p>For reason that github pages allows user and organization site to be built from master branch only, when you execute <code>pencil push</code>, the local master branch will be pushed to remote source branch and directory &#39;./public&#39; will be pushed to remote master branch, in fact, <code>git push origin master:source</code> and <code>git substree push --prefix public origin master</code> are executed underwater. </p>
<h1 id="customization">Customization</h1>
<h2 id="-configuration">- Configuration</h2>
<p><code>/config.yml</code> is the only configuration file in your site, you can modify and add various options according to your fact need. All the information will be loaded to data which is used to render templates.</p>
<h2 id="-theme">- Theme</h2>
<p>Pencil used ejs as the template engine of theme, a valid theme must have <code>views</code>, <code>views/index.ejs</code>, <code>views/article.ejs</code>, <code>views/page.ejs</code>, and <code>theme_assets</code>, they will be used to generate index pages, article pages and independent pages respectively, <code>views/archive.ejs</code>, <code>views/tag.ejs</code>, <code>views/category.ejs</code> will be used to generate archive page, summary page of tags and categories if they are exist. If you attach a category or some tags to articles, index pages of categories or tags will be generated automatically.</p>
<p>When you write your own theme, all template data has been stored in variable <code>locals</code>, its value is shown as following. In addition, you can add a <code>config.yml</code> in theme directory to adjust theme&#39;s final display.</p>
<p><strong>Attention: all static files referenced in theme templates, articles and independent pages must use absolute path</strong> </p>
<pre><code class="lang-js">locals = {
    <span class="comment">// configuration information from config.yml</span>
    config: {
        site: {
            host: <span class="string">'http://blog.me'</span>,
            title: <span class="string">'title of blog'</span>,
            description: <span class="string">'description of blog'</span>
        },
        contact: {
            email: <span class="string">'your.gmail.com'</span>,
            weibo: <span class="string">'your.weibo.com'</span>,
            github: <span class="string">'your.github.com'</span>
        },
        <span class="comment">// configuration of theme</span>
        themeConfig: { ... }
    },
    <span class="comment">// data generated by pencil's main program</span>
    data: {
        <span class="comment">// label indicates position of current page</span>
        label: <span class="string">'index'</span>,
        <span class="comment">// all tags attached to articles</span>
        tags: {
            JavaScript: [article_1, article_2, article_3, ...],
            Python: [article_1, article_2, article_3, ...]
        },
        <span class="comment">// all categories attached to articles</span>
        categories: {
            frontend: [article_1, article_2, article_3, ...],
            database: [article_1, article_2, article_3, ...]
        },
        <span class="comment">// archive information of all articles</span>
        archives: {
            <span class="string">"2017"</span>: {
                <span class="string">"06"</span>: [article_1, article_2, article_3, ...],
                <span class="string">"07"</span>: [article_1, article_2, article_3, ...]
            },
            <span class="string">"2016"</span>: {
                <span class="string">"08"</span>: [article_1, article_2, article_3, ...],
                <span class="string">"09"</span>: [article_1, article_2, article_3, ....]
            }
        },
        <span class="comment">// links of independent pages</span>
        pageLinks: {
            about: <span class="string">'/page/about.html'</span>
        },
        <span class="comment">// articles data in various index pages</span>
        articles: [article_1, article_2, article_3, ....],
        <span class="comment">// article data in article page </span>
        article: {
            title: <span class="string">'study javascript'</span>,
            tags: [<span class="string">'javascript'</span>, <span class="string">'node'</span>],
            category: <span class="string">'frontend'</span>,
            createdTime: <span class="string">'2017-01-01 09:00'</span>,
            content: <span class="string">'html string of content'</span>,
            <span class="keyword">abstract</span>: <span class="string">'html string of abstract'</span>,
            <span class="comment">// filename of final article page generated</span>
            filename: <span class="string">'study_javascript.html'</span>
        },
        <span class="comment">// page data in independent page</span>
        page: {
            title: <span class="string">'about'</span>,
            createdTime: <span class="string">'2017-01-01 09:00'</span>,
            content: <span class="string">'html string of content'</span>,
            filename: <span class="string">'about.html'</span>
        }
    },
    <span class="comment">// result returned by plugin function</span>
    plugins: {
        tagcloud: <span class="string">'&lt;div class="tag-cloud">...&lt;/div>'</span>
    }
}
</code></pre>
<h2 id="-plugin">- Plugin</h2>
<p>In fact, every plugin should be a function, once you place a plugin in <code>/plugins</code> directory, plugin function will be called with seven arguments automatically, the seven arguments are <code>config</code>, <code>articles</code>,  <code>pages</code>, <code>tags</code>, <code>categories</code>, <code>archives</code>, <code>pageLinks</code>. Return value of plugin function will be inserted to <code>locals.plugins</code>.</p>
<h1 id="license">License</h1>
<p>MIT license</p>

			</section>
			</div>
			<footer class="footer">
	<p class="copyright">2017 powered by pencil</p>
</footer>
		</div>
	</div>
	<script src="/theme_assets/js/vendor/zepto.js"></script>
<script src="/theme_assets/js/site.js"></script>
</body>
</html>